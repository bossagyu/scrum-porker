# i18nï¼ˆå›½éš›åŒ–ï¼‰Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** æ—¥æœ¬èªãƒ»è‹±èªã®2è¨€èªå¯¾å¿œã€‚ãƒ˜ãƒƒãƒ€ãƒ¼ã®UIãƒˆã‚°ãƒ«ã§åˆ‡ã‚Šæ›¿ãˆã€ãƒ–ãƒ©ã‚¦ã‚¶è¨€èªã§åˆæœŸå€¤ã‚’è‡ªå‹•åˆ¤å®šã€‚

**Architecture:** next-intl ã‚’ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãªã—ãƒ¢ãƒ¼ãƒ‰ã§ä½¿ç”¨ã€‚ç¿»è¨³ JSON ãƒ•ã‚¡ã‚¤ãƒ«ã«å…¨UIæ–‡å­—åˆ—ã‚’æŠ½å‡ºã—ã€`useTranslations` ãƒ•ãƒƒã‚¯ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰å‚ç…§ã€‚Server Actions ã¯ã‚¨ãƒ©ãƒ¼ã‚­ãƒ¼ã‚’è¿”ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ç¿»è¨³è¡¨ç¤ºã€‚

**Tech Stack:** next-intl, React Context (locale state), localStorage (è¨€èªä¿æŒ)

---

### Task 1: next-intl ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— + ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

**Files:**
- Create: `messages/ja.json`
- Create: `messages/en.json`
- Create: `src/i18n/config.ts`
- Create: `src/i18n/client.tsx`

**Step 1: next-intl ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

Run: `pnpm add next-intl`

**Step 2: ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆæ—¥æœ¬èªï¼‰**

`messages/ja.json`:
```json
{
  "common": {
    "appName": "Scrum Poker",
    "homeLink": "ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹",
    "retry": "å†è©¦è¡Œ",
    "close": "é–‰ã˜ã‚‹",
    "save": "ä¿å­˜",
    "saving": "ä¿å­˜ä¸­...",
    "settings": "è¨­å®š"
  },
  "home": {
    "description": "ãƒãƒ¼ãƒ ã§ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’è¦‹ç©ã‚‚ã‚‹ãŸã‚ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ„ãƒ¼ãƒ«"
  },
  "createRoom": {
    "title": "ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆ",
    "description": "æ–°ã—ã„ã‚¹ã‚¯ãƒ©ãƒ ãƒãƒ¼ã‚«ãƒ¼ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆã—ã¾ã™",
    "roomName": "ãƒ«ãƒ¼ãƒ å",
    "roomNamePlaceholder": "ã‚¹ãƒ—ãƒªãƒ³ãƒˆè¨ˆç”»",
    "displayName": "è¡¨ç¤ºå",
    "displayNamePlaceholder": "ã‚ãªãŸã®åå‰",
    "cardSet": "ã‚«ãƒ¼ãƒ‰ã‚»ãƒƒãƒˆ",
    "customCardHint": "æ•°å€¤ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›",
    "timer": "ã‚¿ã‚¤ãƒãƒ¼",
    "autoReveal": "å…¨å“¡æŠ•ç¥¨å¾Œã«è‡ªå‹•ã§çµæœã‚’è¡¨ç¤º",
    "allowAllControl": "å…¨å“¡ãŒçµæœã®å…¬é–‹ãƒ»æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã‚’æ“ä½œå¯èƒ½",
    "submit": "ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆ",
    "submitting": "ä½œæˆä¸­..."
  },
  "joinRoom": {
    "title": "ãƒ«ãƒ¼ãƒ ã«å‚åŠ ",
    "description": "ãƒ«ãƒ¼ãƒ ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦å‚åŠ ã—ã¾ã™",
    "descriptionWithName": "ã€Œ{roomName}ã€ã«å‚åŠ ã—ã¾ã™",
    "roomCode": "ãƒ«ãƒ¼ãƒ ã‚³ãƒ¼ãƒ‰",
    "displayName": "è¡¨ç¤ºå",
    "displayNamePlaceholder": "ã‚ãªãŸã®åå‰",
    "submit": "ãƒ«ãƒ¼ãƒ ã«å‚åŠ ",
    "submitting": "å‚åŠ ä¸­...",
    "cardSet": "ã‚«ãƒ¼ãƒ‰ã‚»ãƒƒãƒˆ: {name}"
  },
  "voting": {
    "selectCard": "ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠ",
    "observerCannotVote": "ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼ã¯æŠ•ç¥¨ã§ãã¾ã›ã‚“",
    "noSession": "æŠ•ç¥¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã¾ã é–‹å§‹ã•ã‚Œã¦ã„ã¾ã›ã‚“",
    "result": "æŠ•ç¥¨çµæœ"
  },
  "cardSets": {
    "fibonacci": "ãƒ•ã‚£ãƒœãƒŠãƒƒãƒæ•°åˆ—",
    "tshirt": "Tã‚·ãƒ£ãƒ„ã‚µã‚¤ã‚º",
    "powerOf2": "2ã®ã¹ãä¹—",
    "custom": "ã‚«ã‚¹ã‚¿ãƒ ",
    "customCardLabel": "ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ¼ãƒ‰ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰",
    "customCardPlaceholder": "ä¾‹: 1, 2, 3, 5, 8, 13",
    "specialCardsNote": "ç‰¹æ®Šã‚«ãƒ¼ãƒ‰ï¼ˆ?, âˆ, â˜•ï¼‰ã¯è‡ªå‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™"
  },
  "timer": {
    "none": "ãªã—",
    "seconds": "{value}ç§’",
    "minutes": "{value}åˆ†",
    "remaining": "æ®‹ã‚Šæ™‚é–“ {time}"
  },
  "participant": {
    "title": "å‚åŠ è€… ({count})",
    "facilitator": "ãƒ•ã‚¡ã‚·ãƒªãƒ†ãƒ¼ã‚¿ãƒ¼",
    "observer": "ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼",
    "voted": "æŠ•ç¥¨æ¸ˆã¿",
    "notVoted": "æœªæŠ•ç¥¨"
  },
  "roomHeader": {
    "reveal": "çµæœã‚’å…¬é–‹",
    "nextRound": "æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰",
    "history": "å±¥æ­´"
  },
  "roomSettings": {
    "title": "ãƒ«ãƒ¼ãƒ è¨­å®š"
  },
  "history": {
    "title": "ã‚»ãƒƒã‚·ãƒ§ãƒ³å±¥æ­´",
    "empty": "ã¾ã å…¬é–‹æ¸ˆã¿ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã¯ã‚ã‚Šã¾ã›ã‚“",
    "round": "ãƒ©ã‚¦ãƒ³ãƒ‰ {number}",
    "average": "å¹³å‡: {value}"
  },
  "statistics": {
    "title": "çµ±è¨ˆ",
    "average": "å¹³å‡",
    "median": "ä¸­å¤®å€¤",
    "mode": "æœ€é »å€¤",
    "distribution": "åˆ†å¸ƒ"
  },
  "export": {
    "csvHeader": "ãƒ©ã‚¦ãƒ³ãƒ‰,ãƒˆãƒ”ãƒƒã‚¯,æ—¥æ™‚,å‚åŠ è€…,æŠ•ç¥¨å€¤",
    "noTopic": "(ãƒˆãƒ”ãƒƒã‚¯ãªã—)"
  },
  "errors": {
    "roomLoadFailed": "ãƒ«ãƒ¼ãƒ ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ",
    "roomLoadDescription": "ãƒ«ãƒ¼ãƒ æƒ…å ±ã®å–å¾—ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ãƒ«ãƒ¼ãƒ ãŒå­˜åœ¨ã—ãªã„ã‹ã€æ¥ç¶šã«å•é¡ŒãŒã‚ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚",
    "roomNotFound": "ãƒ«ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",
    "roomNotFoundDescription": "æŒ‡å®šã•ã‚ŒãŸãƒ«ãƒ¼ãƒ ã¯å­˜åœ¨ã—ãªã„ã‹ã€ã™ã§ã«çµ‚äº†ã—ã¦ã„ã¾ã™ã€‚ãƒ«ãƒ¼ãƒ ã‚³ãƒ¼ãƒ‰ã‚’ã”ç¢ºèªãã ã•ã„ã€‚",
    "pageNotFound": "ãƒšãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",
    "pageNotFoundDescription": "ãŠæ¢ã—ã®ãƒšãƒ¼ã‚¸ã¯å­˜åœ¨ã—ãªã„ã‹ã€ç§»å‹•ã—ãŸå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚",
    "unexpected": "ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ",
    "unexpectedDescription": "äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚",
    "auth": "èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ",
    "roomCreate": "ãƒ«ãƒ¼ãƒ ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ",
    "participantRegister": "å‚åŠ è€…ã®ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ",
    "roomNotFoundAction": "ãƒ«ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“",
    "joinFailed": "ãƒ«ãƒ¼ãƒ ã¸ã®å‚åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ",
    "duplicateDisplayName": "ã“ã®è¡¨ç¤ºåã¯æ—¢ã«ä½¿ã‚ã‚Œã¦ã„ã¾ã™",
    "invalidInput": "å…¥åŠ›ãŒç„¡åŠ¹ã§ã™",
    "authRequired": "èªè¨¼ãŒå¿…è¦ã§ã™",
    "permissionDenied": "è¨­å®šã‚’å¤‰æ›´ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“",
    "settingsUpdate": "è¨­å®šã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ",
    "vote": "æŠ•ç¥¨ã«å¤±æ•—ã—ã¾ã—ãŸ",
    "reveal": "çµæœã®å…¬é–‹ã«å¤±æ•—ã—ã¾ã—ãŸ",
    "timerReveal": "ã‚¿ã‚¤ãƒãƒ¼å…¬é–‹ã«å¤±æ•—ã—ã¾ã—ãŸ",
    "reset": "ãƒªã‚»ãƒƒãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ",
    "historyFetch": "å±¥æ­´ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ",
    "invalidSession": "ç„¡åŠ¹ãªã‚»ãƒƒã‚·ãƒ§ãƒ³IDã§ã™",
    "invalidRoom": "ç„¡åŠ¹ãªãƒ«ãƒ¼ãƒ IDã§ã™",
    "unknown": "ä¸æ˜"
  },
  "validation": {
    "roomNameRequired": "ãƒ«ãƒ¼ãƒ åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    "roomNameMax": "ãƒ«ãƒ¼ãƒ åã¯100æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„",
    "displayNameRequired": "è¡¨ç¤ºåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    "displayNameMax": "è¡¨ç¤ºåã¯20æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„",
    "roomCodeRequired": "ãƒ«ãƒ¼ãƒ ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„",
    "customCardsInvalid": "ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ¼ãƒ‰ã¯2ã€œ20æšã®æ•°å€¤ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„"
  },
  "metadata": {
    "description": "ã‚·ãƒ³ãƒ—ãƒ«ã§ä½¿ã„ã‚„ã™ã„ã‚¹ã‚¯ãƒ©ãƒ ãƒãƒ¼ã‚«ãƒ¼ãƒ„ãƒ¼ãƒ«ã€‚ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒãƒ¼ãƒ ã®ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆè¦‹ç©ã‚‚ã‚Šã‚’åŠ¹ç‡åŒ–ã€‚",
    "shortDescription": "ã‚·ãƒ³ãƒ—ãƒ«ã§ä½¿ã„ã‚„ã™ã„ã‚¹ã‚¯ãƒ©ãƒ ãƒãƒ¼ã‚«ãƒ¼ãƒ„ãƒ¼ãƒ«",
    "keywords": "ã‚¹ã‚¯ãƒ©ãƒ ,ãƒãƒ¼ã‚«ãƒ¼,ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«,è¦‹ç©ã‚‚ã‚Š,ãƒ—ãƒ©ãƒ³ãƒ‹ãƒ³ã‚°ãƒãƒ¼ã‚«ãƒ¼",
    "roomTitle": "ãƒ«ãƒ¼ãƒ  {code}",
    "joinTitle": "ãƒ«ãƒ¼ãƒ  {code} ã«å‚åŠ "
  }
}
```

**Step 3: ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆï¼ˆè‹±èªï¼‰**

`messages/en.json`: å…¨ã‚­ãƒ¼ã®è‹±èªè¨³ç‰ˆã‚’ä½œæˆï¼ˆæ§‹é€ ã¯ ja.json ã¨åŒä¸€ï¼‰ã€‚

**Step 4: i18n è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ**

`src/i18n/config.ts`:
```typescript
export const locales = ['ja', 'en'] as const
export type Locale = (typeof locales)[number]
export const defaultLocale: Locale = 'ja'

export function getMessages(locale: Locale) {
  return locale === 'ja'
    ? import('../../messages/ja.json').then((m) => m.default)
    : import('../../messages/en.json').then((m) => m.default)
}

export function detectLocale(): Locale {
  if (typeof window === 'undefined') return defaultLocale
  const stored = localStorage.getItem('locale')
  if (stored === 'ja' || stored === 'en') return stored
  const browserLang = navigator.language
  return browserLang.startsWith('ja') ? 'ja' : 'en'
}
```

**Step 5: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ Provider ä½œæˆ**

`src/i18n/client.tsx`:
```typescript
'use client'

import { createContext, useContext, useEffect, useState, type ReactNode } from 'react'
import { NextIntlClientProvider } from 'next-intl'
import { type Locale, detectLocale, getMessages } from './config'

type LocaleContextType = {
  readonly locale: Locale
  readonly setLocale: (locale: Locale) => void
}

const LocaleContext = createContext<LocaleContextType>({
  locale: 'ja',
  setLocale: () => {},
})

export function useLocale() {
  return useContext(LocaleContext)
}

export function I18nProvider({ children }: { readonly children: ReactNode }) {
  const [locale, setLocaleState] = useState<Locale>('ja')
  const [messages, setMessages] = useState<Record<string, unknown> | null>(null)

  const setLocale = (newLocale: Locale) => {
    setLocaleState(newLocale)
    localStorage.setItem('locale', newLocale)
  }

  useEffect(() => {
    const detected = detectLocale()
    setLocaleState(detected)
  }, [])

  useEffect(() => {
    getMessages(locale).then(setMessages)
  }, [locale])

  if (!messages) return null

  return (
    <LocaleContext.Provider value={{ locale, setLocale }}>
      <NextIntlClientProvider locale={locale} messages={messages}>
        {children}
      </NextIntlClientProvider>
    </LocaleContext.Provider>
  )
}
```

**Step 6: ã‚³ãƒŸãƒƒãƒˆ**

```bash
git add messages/ src/i18n/
git commit -m "feat: next-intl ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¨ç¿»è¨³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½åŠ "
```

---

### Task 2: layout.tsx + header.tsx ã®æ›´æ–°

**Files:**
- Modify: `src/app/layout.tsx`
- Modify: `src/components/layout/header.tsx`

**Step 1: layout.tsx ã« I18nProvider ã‚’è¿½åŠ **

`src/app/layout.tsx` ã® `<body>` å†…ã« `<I18nProvider>` ã§ãƒ©ãƒƒãƒ—ã€‚`<html lang="ja">` ã‚’ç¶­æŒï¼ˆã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§å‹•çš„æ›´æ–°ã¯åˆ¥é€” `useEffect` ã§å¯¾å¿œï¼‰ã€‚

**Step 2: header.tsx ã«è¨€èªåˆ‡æ›¿ãƒœã‚¿ãƒ³ã‚’è¿½åŠ **

`src/components/layout/header.tsx` ã‚’ `'use client'` ã«å¤‰æ›´ã—ã€`useLocale` ãƒ•ãƒƒã‚¯ã§åˆ‡æ›¿ãƒœã‚¿ãƒ³ã‚’è¿½åŠ :
```typescript
'use client'

import Link from 'next/link'
import { useLocale } from '@/i18n/client'
import { Button } from '@/components/ui/button'

export function Header() {
  const { locale, setLocale } = useLocale()

  return (
    <header className="border-b bg-background">
      <div className="container mx-auto flex h-14 items-center justify-between px-4">
        <Link href="/" className="flex items-center gap-2 text-lg font-bold">
          <span role="img" aria-label="playing card">ğŸƒ</span>
          <span>Scrum Poker</span>
        </Link>
        <Button
          variant="ghost"
          size="sm"
          onClick={() => setLocale(locale === 'ja' ? 'en' : 'ja')}
        >
          {locale === 'ja' ? 'EN' : 'æ—¥æœ¬èª'}
        </Button>
      </div>
    </header>
  )
}
```

**Step 3: ã‚³ãƒŸãƒƒãƒˆ**

```bash
git add src/app/layout.tsx src/components/layout/header.tsx
git commit -m "feat: I18nProvider ã¨è¨€èªåˆ‡æ›¿ãƒœã‚¿ãƒ³ã‚’è¿½åŠ "
```

---

### Task 3: Server Actions ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚­ãƒ¼ã«å¤‰æ›´

**Files:**
- Modify: `src/actions/room.ts`
- Modify: `src/actions/vote.ts`
- Modify: `src/actions/history.ts`

**Step 1: room.ts ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚­ãƒ¼ã«ç½®æ›**

å…¨ã¦ã®æ—¥æœ¬èªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¿»è¨³ã‚­ãƒ¼ã«ç½®æ›:
- `'èªè¨¼ã«å¤±æ•—ã—ã¾ã—ãŸ'` â†’ `'errors.auth'`
- `'ãƒ«ãƒ¼ãƒ ã®ä½œæˆã«å¤±æ•—ã—ã¾ã—ãŸ'` â†’ `'errors.roomCreate'`
- `'å‚åŠ è€…ã®ç™»éŒ²ã«å¤±æ•—ã—ã¾ã—ãŸ'` â†’ `'errors.participantRegister'`
- `'ãƒ«ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'` â†’ `'errors.roomNotFoundAction'`
- `'ã“ã®è¡¨ç¤ºåã¯æ—¢ã«ä½¿ã‚ã‚Œã¦ã„ã¾ã™'` â†’ `'errors.duplicateDisplayName'`
- `'ãƒ«ãƒ¼ãƒ ã¸ã®å‚åŠ ã«å¤±æ•—ã—ã¾ã—ãŸ'` â†’ `'errors.joinFailed'`
- `'å…¥åŠ›ãŒç„¡åŠ¹ã§ã™'` â†’ `'errors.invalidInput'`
- `'èªè¨¼ãŒå¿…è¦ã§ã™'` â†’ `'errors.authRequired'`
- `'è¨­å®šã‚’å¤‰æ›´ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“'` â†’ `'errors.permissionDenied'`
- `'è¨­å®šã®æ›´æ–°ã«å¤±æ•—ã—ã¾ã—ãŸ'` â†’ `'errors.settingsUpdate'`

Zod ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚‚ã‚­ãƒ¼ã«:
- `'ãƒ«ãƒ¼ãƒ åã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'` â†’ `'validation.roomNameRequired'`
- `'ãƒ«ãƒ¼ãƒ åã¯100æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'` â†’ `'validation.roomNameMax'`
- `'è¡¨ç¤ºåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'` â†’ `'validation.displayNameRequired'`
- `'è¡¨ç¤ºåã¯20æ–‡å­—ä»¥å†…ã§å…¥åŠ›ã—ã¦ãã ã•ã„'` â†’ `'validation.displayNameMax'`
- `'ãƒ«ãƒ¼ãƒ ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'` â†’ `'validation.roomCodeRequired'`
- `'ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ¼ãƒ‰ã¯2ã€œ20æšã®æ•°å€¤ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ã—ã¦ãã ã•ã„'` â†’ `'validation.customCardsInvalid'`

**Step 2: vote.ts ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚­ãƒ¼ã«ç½®æ›**

- `'ç„¡åŠ¹ãªå…¥åŠ›ã§ã™'` â†’ `'errors.invalidInput'`
- `'æŠ•ç¥¨ã«å¤±æ•—ã—ã¾ã—ãŸ'` â†’ `'errors.vote'`
- `'ç„¡åŠ¹ãªã‚»ãƒƒã‚·ãƒ§ãƒ³IDã§ã™'` â†’ `'errors.invalidSession'`
- `'çµæœã®å…¬é–‹ã«å¤±æ•—ã—ã¾ã—ãŸ'` â†’ `'errors.reveal'`
- `'ã‚¿ã‚¤ãƒãƒ¼å…¬é–‹ã«å¤±æ•—ã—ã¾ã—ãŸ'` â†’ `'errors.timerReveal'`
- `'ç„¡åŠ¹ãªãƒ«ãƒ¼ãƒ IDã§ã™'` â†’ `'errors.invalidRoom'`
- `'ãƒªã‚»ãƒƒãƒˆã«å¤±æ•—ã—ã¾ã—ãŸ'` â†’ `'errors.reset'`

**Step 3: history.ts ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚­ãƒ¼ã«ç½®æ›**

- `'ç„¡åŠ¹ãªãƒ«ãƒ¼ãƒ IDã§ã™'` â†’ `'errors.invalidRoom'`
- `'å±¥æ­´ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ'` â†’ `'errors.historyFetch'`
- `'ä¸æ˜'` â†’ `'errors.unknown'`

**Step 4: ã‚³ãƒŸãƒƒãƒˆ**

```bash
git add src/actions/
git commit -m "refactor: Server Actions ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¿»è¨³ã‚­ãƒ¼ã«å¤‰æ›´"
```

---

### Task 4: ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç¿»è¨³å¯¾å¿œ

**Files:**
- Modify: `src/components/room/create-room-form.tsx`
- Modify: `src/components/room/join-room-form.tsx`
- Modify: `src/components/room/room-settings-dialog.tsx`

**Step 1: create-room-form.tsx ã« useTranslations ã‚’é©ç”¨**

```typescript
import { useTranslations } from 'next-intl'
// ...
const t = useTranslations()
// å…¨ã¦ã®æ—¥æœ¬èªæ–‡å­—åˆ—ã‚’ t('createRoom.title') ç­‰ã«ç½®æ›
// ã‚¨ãƒ©ãƒ¼è¡¨ç¤º: state.error ã‚’ t(state.error) ã«å¤‰æ›
```

ä¸»ãªç½®æ›:
- `'ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆ'` â†’ `{t('createRoom.title')}`
- `'æ–°ã—ã„ã‚¹ã‚¯ãƒ©ãƒ ãƒãƒ¼ã‚«ãƒ¼ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆã—ã¾ã™'` â†’ `{t('createRoom.description')}`
- `'ãƒ«ãƒ¼ãƒ å'` â†’ `{t('createRoom.roomName')}`
- `'ã‚¹ãƒ—ãƒªãƒ³ãƒˆè¨ˆç”»'` â†’ `{t('createRoom.roomNamePlaceholder')}`
- `'è¡¨ç¤ºå'` â†’ `{t('createRoom.displayName')}`
- `'ã‚ãªãŸã®åå‰'` â†’ `{t('createRoom.displayNamePlaceholder')}`
- `'ã‚«ãƒ¼ãƒ‰ã‚»ãƒƒãƒˆ'` â†’ `{t('createRoom.cardSet')}`
- `'æ•°å€¤ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›'` â†’ `{t('createRoom.customCardHint')}`
- `'ã‚¿ã‚¤ãƒãƒ¼'` â†’ `{t('createRoom.timer')}`
- `'å…¨å“¡æŠ•ç¥¨å¾Œã«è‡ªå‹•ã§çµæœã‚’è¡¨ç¤º'` â†’ `{t('createRoom.autoReveal')}`
- `'å…¨å“¡ãŒçµæœã®å…¬é–‹ãƒ»æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã‚’æ“ä½œå¯èƒ½'` â†’ `{t('createRoom.allowAllControl')}`
- `'ä½œæˆä¸­...'` / `'ãƒ«ãƒ¼ãƒ ã‚’ä½œæˆ'` â†’ `{isPending ? t('createRoom.submitting') : t('createRoom.submit')}`
- `state.error` è¡¨ç¤ºéƒ¨åˆ†: `{state.error && <p ...>{t(state.error)}</p>}`

cardSetOptions ã® label ã‚’ç¿»è¨³ã‚­ãƒ¼ã‹ã‚‰å–å¾—:
```typescript
const t = useTranslations()
const cardSetOptions = [
  { value: 'fibonacci' as const, label: t('cardSets.fibonacci') },
  { value: 'tshirt' as const, label: t('cardSets.tshirt') },
  { value: 'powerOf2' as const, label: t('cardSets.powerOf2') },
  { value: 'custom' as const, label: t('cardSets.custom') },
]
```

TIMER_OPTIONS ã® label ã‚‚ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ç¿»è¨³:
```typescript
const timerLabels: Record<string, string> = {
  'ãªã—': t('timer.none'),
  '30ç§’': t('timer.seconds', { value: 30 }),
  '1åˆ†': t('timer.minutes', { value: 1 }),
  '2åˆ†': t('timer.minutes', { value: 2 }),
  '5åˆ†': t('timer.minutes', { value: 5 }),
}
```

ï¼ˆTIMER_OPTIONS è‡ªä½“ã¯ãã®ã¾ã¾ constants ã‹ã‚‰ import ã—ã€è¡¨ç¤ºæ™‚ã«ç¿»è¨³ãƒ©ãƒ™ãƒ«ã‚’ä½¿ã†ï¼‰

**Step 2: join-room-form.tsx ã« useTranslations ã‚’é©ç”¨**

- `'ãƒ«ãƒ¼ãƒ ã«å‚åŠ '` â†’ `{t('joinRoom.title')}`
- `'ãƒ«ãƒ¼ãƒ ã‚³ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦å‚åŠ ã—ã¾ã™'` â†’ `{t('joinRoom.description')}`
- `` `ã€Œ${roomName}ã€ã«å‚åŠ ã—ã¾ã™` `` â†’ `{t('joinRoom.descriptionWithName', { roomName })}`
- `'ãƒ«ãƒ¼ãƒ ã‚³ãƒ¼ãƒ‰'` â†’ `{t('joinRoom.roomCode')}`
- `'è¡¨ç¤ºå'` â†’ `{t('joinRoom.displayName')}`
- `'ã‚ãªãŸã®åå‰'` â†’ `{t('joinRoom.displayNamePlaceholder')}`
- `'å‚åŠ ä¸­...'` / `'ãƒ«ãƒ¼ãƒ ã«å‚åŠ '` â†’ `{isPending ? t('joinRoom.submitting') : t('joinRoom.submit')}`
- ã‚¨ãƒ©ãƒ¼è¡¨ç¤º: `{t(state.error)}`

**Step 3: room-settings-dialog.tsx ã« useTranslations ã‚’é©ç”¨**

- `'è¨­å®š'` â†’ `{t('common.settings')}`
- `'ãƒ«ãƒ¼ãƒ è¨­å®š'` â†’ `{t('roomSettings.title')}`
- `'ã‚«ãƒ¼ãƒ‰ã‚»ãƒƒãƒˆ'` â†’ `{t('createRoom.cardSet')}`
- `'ã‚«ã‚¹ã‚¿ãƒ ã‚«ãƒ¼ãƒ‰ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰'` â†’ `{t('cardSets.customCardLabel')}`
- `'ä¾‹: 1, 2, 3, 5, 8, 13'` â†’ `{t('cardSets.customCardPlaceholder')}`
- `'ç‰¹æ®Šã‚«ãƒ¼ãƒ‰ï¼ˆ?, âˆ, â˜•ï¼‰ã¯è‡ªå‹•çš„ã«è¿½åŠ ã•ã‚Œã¾ã™'` â†’ `{t('cardSets.specialCardsNote')}`
- `'ã‚¿ã‚¤ãƒãƒ¼'` â†’ `{t('createRoom.timer')}`
- `'å…¨å“¡æŠ•ç¥¨å¾Œã«è‡ªå‹•ã§çµæœã‚’è¡¨ç¤º'` â†’ `{t('createRoom.autoReveal')}`
- `'å…¨å“¡ãŒçµæœã®å…¬é–‹ãƒ»æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã‚’æ“ä½œå¯èƒ½'` â†’ `{t('createRoom.allowAllControl')}`
- `'ä¿å­˜ä¸­...'` / `'ä¿å­˜'` â†’ `{isPending ? t('common.saving') : t('common.save')}`

**Step 4: ã‚³ãƒŸãƒƒãƒˆ**

```bash
git add src/components/room/create-room-form.tsx src/components/room/join-room-form.tsx src/components/room/room-settings-dialog.tsx
git commit -m "feat: ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç¿»è¨³å¯¾å¿œ"
```

---

### Task 5: ãƒ«ãƒ¼ãƒ å†…ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç¿»è¨³å¯¾å¿œ

**Files:**
- Modify: `src/components/room/voting-cards.tsx`
- Modify: `src/components/room/vote-result.tsx`
- Modify: `src/components/room/vote-summary.tsx`
- Modify: `src/components/room/participant-list.tsx`
- Modify: `src/components/room/room-header.tsx`
- Modify: `src/components/room/session-history.tsx`
- Modify: `src/components/room/countdown-timer.tsx`

**Step 1: å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã« useTranslations ã‚’é©ç”¨**

voting-cards.tsx:
- `'ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼ã¯æŠ•ç¥¨ã§ãã¾ã›ã‚“'` â†’ `{t('voting.observerCannotVote')}`
- `'æŠ•ç¥¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã¾ã é–‹å§‹ã•ã‚Œã¦ã„ã¾ã›ã‚“'` â†’ `{t('voting.noSession')}`
- `'ã‚«ãƒ¼ãƒ‰ã‚’é¸æŠ'` â†’ `{t('voting.selectCard')}`

vote-result.tsx:
- `'æŠ•ç¥¨çµæœ'` â†’ `{t('voting.result')}`

vote-summary.tsx:
- `'çµ±è¨ˆ'` â†’ `{t('statistics.title')}`
- `'å¹³å‡'` â†’ `{t('statistics.average')}`
- `'ä¸­å¤®å€¤'` â†’ `{t('statistics.median')}`
- `'æœ€é »å€¤'` â†’ `{t('statistics.mode')}`
- `'åˆ†å¸ƒ'` â†’ `{t('statistics.distribution')}`

participant-list.tsx:
- `` `å‚åŠ è€… (${participants.length})` `` â†’ `{t('participant.title', { count: participants.length })}`
- `'ãƒ•ã‚¡ã‚·ãƒªãƒ†ãƒ¼ã‚¿ãƒ¼'` â†’ `{t('participant.facilitator')}`
- `'ã‚ªãƒ–ã‚¶ãƒ¼ãƒãƒ¼'` â†’ `{t('participant.observer')}`
- `'æŠ•ç¥¨æ¸ˆã¿'` â†’ `{t('participant.voted')}`
- `'æœªæŠ•ç¥¨'` â†’ `{t('participant.notVoted')}`

room-header.tsx:
- `'å±¥æ­´'` â†’ `{t('roomHeader.history')}`
- `'çµæœã‚’å…¬é–‹'` â†’ `{t('roomHeader.reveal')}`
- `'æ¬¡ã®ãƒ©ã‚¦ãƒ³ãƒ‰'` â†’ `{t('roomHeader.nextRound')}`

session-history.tsx:
- `'ã‚»ãƒƒã‚·ãƒ§ãƒ³å±¥æ­´'` â†’ `{t('history.title')}`
- `'é–‰ã˜ã‚‹'` â†’ `{t('common.close')}`
- `'ã¾ã å…¬é–‹æ¸ˆã¿ã®ãƒ©ã‚¦ãƒ³ãƒ‰ã¯ã‚ã‚Šã¾ã›ã‚“'` â†’ `{t('history.empty')}`
- `` `ãƒ©ã‚¦ãƒ³ãƒ‰ ${history.length - index}` `` â†’ `{t('history.round', { number: history.length - index })}`
- `` `å¹³å‡: ${calculateSessionAverage(...)}` `` â†’ `{t('history.average', { value: calculateSessionAverage(...) })}`

countdown-timer.tsx:
- `` `æ®‹ã‚Šæ™‚é–“ ${display}` `` â†’ `{t('timer.remaining', { time: display })}`

**Step 2: ã‚³ãƒŸãƒƒãƒˆ**

```bash
git add src/components/room/
git commit -m "feat: ãƒ«ãƒ¼ãƒ å†…ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ç¿»è¨³å¯¾å¿œ"
```

---

### Task 6: ãƒšãƒ¼ã‚¸ãƒ»ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã®ç¿»è¨³å¯¾å¿œ

**Files:**
- Modify: `src/app/page.tsx`
- Modify: `src/app/error.tsx`
- Modify: `src/app/not-found.tsx`
- Modify: `src/app/room/[code]/error.tsx`
- Modify: `src/app/room/[code]/not-found.tsx`
- Modify: `src/app/room/[code]/join/page.tsx`

**Step 1: page.tsxï¼ˆãƒ›ãƒ¼ãƒ ï¼‰**

Server Component ãªã®ã§ `'use client'` ã«å¤‰æ›´ã™ã‚‹ã‹ã€æ–‡å­—åˆ—ã‚’ Client Component ã«ç§»å‹•ã€‚
æœ€ã‚‚ç°¡å˜: `'use client'` ã«ã—ã¦ `useTranslations` ã‚’ä½¿ç”¨ã€‚

- `'ãƒãƒ¼ãƒ ã§ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã‚’è¦‹ç©ã‚‚ã‚‹ãŸã‚ã®ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ„ãƒ¼ãƒ«'` â†’ `{t('home.description')}`

**Step 2: error.tsx, not-found.tsxï¼ˆãƒ«ãƒ¼ãƒˆï¼‰**

æ—¢ã« `'use client'` ãªã®ã§ `useTranslations` ã‚’è¿½åŠ ã€‚

error.tsx:
- `'ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ'` â†’ `{t('errors.unexpected')}`
- `'äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚'` â†’ `{t('errors.unexpectedDescription')}`
- `'å†è©¦è¡Œ'` â†’ `{t('common.retry')}`
- `'ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹'` â†’ `{t('common.homeLink')}`

not-found.tsx:
- `'ãƒšãƒ¼ã‚¸ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'` â†’ `{t('errors.pageNotFound')}`
- `'ãŠæ¢ã—ã®ãƒšãƒ¼ã‚¸ã¯å­˜åœ¨ã—ãªã„ã‹ã€ç§»å‹•ã—ãŸå¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚'` â†’ `{t('errors.pageNotFoundDescription')}`
- `'ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹'` â†’ `{t('common.homeLink')}`

**Step 3: room/[code]/error.tsx, room/[code]/not-found.tsx**

error.tsx:
- `'ãƒ«ãƒ¼ãƒ ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ'` â†’ `{t('errors.roomLoadFailed')}`
- èª¬æ˜æ–‡ â†’ `{t('errors.roomLoadDescription')}`
- `'å†è©¦è¡Œ'` â†’ `{t('common.retry')}`
- `'ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹'` â†’ `{t('common.homeLink')}`

not-found.tsx ã¯ Server Componentã€‚`'use client'` ã«å¤‰æ›´ã—ã¦ `useTranslations` ã‚’ä½¿ç”¨ã€‚
- `'ãƒ«ãƒ¼ãƒ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“'` â†’ `{t('errors.roomNotFound')}`
- èª¬æ˜æ–‡ â†’ `{t('errors.roomNotFoundDescription')}`
- `'ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹'` â†’ `{t('common.homeLink')}`

**Step 4: room/[code]/join/page.tsx**

Server Componentã€‚`cardSetName` ã®ç¿»è¨³ã¯ join-room-form ã«ç§»ã™ã‹ã€Client Component ã§ãƒ©ãƒƒãƒ—ã€‚

æœ€ã‚‚ã‚·ãƒ³ãƒ—ãƒ«: join/page.tsx ã®ã€Œã‚«ãƒ¼ãƒ‰ã‚»ãƒƒãƒˆ: {name}ã€ãƒ†ã‚­ã‚¹ãƒˆéƒ¨åˆ†ã ã‘ Client Component ã«åˆ†é›¢ã€ã¾ãŸã¯ page.tsx å…¨ä½“ã‚’ `'use client'` ã«ã—ãªã„ï¼ˆmetadata ãŒä½¿ãˆãªããªã‚‹ãŸã‚ï¼‰ã€‚

å¯¾å¿œ: `JoinRoomForm` ã« `cardSet` prop ã‚’æ¸¡ã—ã€ãƒ•ã‚©ãƒ¼ãƒ å†…ã§ç¿»è¨³è¡¨ç¤ºã™ã‚‹ã€‚

**Step 5: ã‚³ãƒŸãƒƒãƒˆ**

```bash
git add src/app/
git commit -m "feat: ãƒšãƒ¼ã‚¸ãƒ»ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸ã®ç¿»è¨³å¯¾å¿œ"
```

---

### Task 7: constants.ts + export-utils.ts ã®ç¿»è¨³å¯¾å¿œ

**Files:**
- Modify: `src/lib/constants.ts`
- Modify: `src/lib/export-utils.ts`

**Step 1: constants.ts ã®ã‚«ãƒ¼ãƒ‰ã‚»ãƒƒãƒˆåã‚’ç¿»è¨³ã‚­ãƒ¼ã«å¤‰æ›´**

CARD_SETS ã® `name` ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ç¿»è¨³ã‚­ãƒ¼ã«:
```typescript
export const CARD_SETS = {
  fibonacci: {
    nameKey: 'cardSets.fibonacci',
    cards: ['0', '1', '2', '3', '5', '8', '13', '21', '34', '?', 'âˆ', 'â˜•'],
  },
  tshirt: {
    nameKey: 'cardSets.tshirt',
    cards: ['XS', 'S', 'M', 'L', 'XL', 'XXL', '?', 'â˜•'],
  },
  powerOf2: {
    nameKey: 'cardSets.powerOf2',
    cards: ['1', '2', '4', '8', '16', '32', '64', '?', 'âˆ', 'â˜•'],
  },
  custom: {
    nameKey: 'cardSets.custom',
    cards: [] as string[],
  },
} as const
```

TIMER_OPTIONS ã® label ã‚‚ç¿»è¨³ã‚­ãƒ¼ã«å¤‰æ›´ã¯ä¸è¦ï¼ˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå´ã§ç¿»è¨³æ¸ˆã¿ï¼‰ã€‚ãŸã ã— TIMER_OPTIONS ã® label ã‚’ç¿»è¨³ã‚­ãƒ¼ã«å¤‰æ›´ã—ã¦ãŠãã¨ä¾¿åˆ©:

```typescript
export const TIMER_OPTIONS = [
  { value: null, labelKey: 'timer.none' },
  { value: 30, labelKey: 'timer.seconds', labelArgs: { value: 30 } },
  { value: 60, labelKey: 'timer.minutes', labelArgs: { value: 1 } },
  { value: 120, labelKey: 'timer.minutes', labelArgs: { value: 2 } },
  { value: 300, labelKey: 'timer.minutes', labelArgs: { value: 5 } },
] as const
```

**Step 2: export-utils.ts ã® CSV ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’ç¿»è¨³å¯¾å¿œ**

`generateCsv` ã« locale ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¿½åŠ :
```typescript
export function generateCsv(
  sessions: readonly ExportSession[],
  translations: { header: string; noTopic: string },
): string {
  const rows = sessions.flatMap((session, index) =>
    session.votes.map((vote) =>
      [
        index + 1,
        escapeCsvField(session.topic || translations.noTopic),
        session.createdAt,
        escapeCsvField(vote.participantName),
        escapeCsvField(vote.cardValue),
      ].join(','),
    ),
  )
  return [translations.header, ...rows].join('\n')
}
```

å‘¼ã³å‡ºã—å´ï¼ˆsession-history.tsxï¼‰ã§ç¿»è¨³ã‚’æ¸¡ã™:
```typescript
const csv = generateCsv(sessions, {
  header: t('export.csvHeader'),
  noTopic: t('export.noTopic'),
})
```

**Step 3: constants.test.ts ã‚’æ›´æ–°**

`name` â†’ `nameKey` ã®å¤‰æ›´ã«åˆã‚ã›ã¦ãƒ†ã‚¹ãƒˆã‚’ä¿®æ­£ã€‚

**Step 4: ã‚³ãƒŸãƒƒãƒˆ**

```bash
git add src/lib/
git commit -m "feat: constants ã¨ export-utils ã®ç¿»è¨³å¯¾å¿œ"
```

---

### Task 8: ãƒ“ãƒ«ãƒ‰ç¢ºèªãƒ»E2E ãƒ†ã‚¹ãƒˆæ›´æ–°

**Files:**
- Modify: `e2e/helpers.ts`
- Modify: `e2e/room-creation.spec.ts`
- Modify: `e2e/room-join.spec.ts`
- Modify: `e2e/voting.spec.ts`
- Modify: `e2e/auto-reveal.spec.ts`
- Modify: `e2e/session-history.spec.ts`
- Modify: `e2e/timer.spec.ts`

**Step 1: ãƒ“ãƒ«ãƒ‰ç¢ºèª**

Run: `pnpm build`
Expected: Build succeeds

**Step 2: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆç¢ºèª**

Run: `pnpm test`
Expected: All tests pass (constants.test.ts ã® name â†’ nameKey ä¿®æ­£å¾Œ)

**Step 3: E2E ãƒ†ã‚¹ãƒˆæ›´æ–°**

E2E ãƒ†ã‚¹ãƒˆã¯ãƒ–ãƒ©ã‚¦ã‚¶è¨€èªãŒæ—¥æœ¬èªã®å ´åˆã¯æ—¥æœ¬èªUIã§å‹•ä½œã™ã‚‹ã€‚ãƒ†ã‚¹ãƒˆç’°å¢ƒã®ãƒ­ã‚±ãƒ¼ãƒ«ã‚’æ˜ç¤ºçš„ã«è¨­å®š:

`e2e/helpers.ts` ã« locale è¨­å®šãƒ˜ãƒ«ãƒ‘ãƒ¼ã‚’è¿½åŠ :
```typescript
export async function setLocale(page: Page, locale: 'ja' | 'en') {
  await page.evaluate((l) => localStorage.setItem('locale', l), locale)
}
```

å„ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã® `beforeEach` ã§æ—¥æœ¬èªã‚’æ˜ç¤ºè¨­å®šï¼ˆæ—¢å­˜ãƒ†ã‚¹ãƒˆã®äº’æ›æ€§ç¶­æŒï¼‰ã€‚
ãƒ†ã‚¹ãƒˆå†…ã®æ—¥æœ¬èªæ–‡å­—åˆ—ã¯ãã®ã¾ã¾ç¶­æŒï¼ˆæ—¥æœ¬èªãƒ­ã‚±ãƒ¼ãƒ«ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ãŸã‚ï¼‰ã€‚

**Step 4: E2E ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**

Run: `pnpm test:e2e`
Expected: All tests pass

**Step 5: ã‚³ãƒŸãƒƒãƒˆ**

```bash
git add e2e/
git commit -m "test: E2Eãƒ†ã‚¹ãƒˆã®ãƒ­ã‚±ãƒ¼ãƒ«è¨­å®šå¯¾å¿œ"
```

---

### Task 9: PR ä½œæˆ

**Step 1: ãƒ–ãƒ©ãƒ³ãƒãƒ—ãƒƒã‚·ãƒ¥**

```bash
git push -u origin feat/i18n
```

**Step 2: PR ä½œæˆ**

```bash
gh pr create --title "feat: æ—¥æœ¬èªãƒ»è‹±èªã®å›½éš›åŒ–å¯¾å¿œ" --body "..."
```
